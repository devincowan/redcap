(("undefined"!==typeof self?self:this)["webpackJsonpmapping_helper_vue"]=("undefined"!==typeof self?self:this)["webpackJsonpmapping_helper_vue"]||[]).push([[3],{"0390":function(t,e,r){"use strict";var n=r("02f4")(!0);t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},"25ea":function(t,e,r){"use strict";var n=r("3f77"),a=r.n(n);a.a},2735:function(t,e,r){"use strict";var n=r("85ad"),a=r.n(n);a.a},2770:function(t,e,r){"use strict";var n=r("7d26"),a=r.n(n);a.a},"3f77":function(t,e,r){},"504c":function(t,e,r){var n=r("9e1e"),a=r("0d58"),i=r("6821"),s=r("52a7").f;t.exports=function(t){return function(e){var r,o=i(e),c=a(o),u=c.length,l=0,d=[];while(u>l)r=c[l++],n&&!s.call(o,r)||d.push(t?[r,o[r]]:o[r]);return d}}},"7d26":function(t,e,r){},"85ad":function(t,e,r){},"85be":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"fhir-resource"},[r("router-view"),r("FhirForm",{staticClass:"fhir-form"},[r("router-view",t._b({ref:"extra_fields",attrs:{name:"extra_fields"}},"router-view",t.$route.query,!1))],1),r("div",{staticClass:"my-2"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:!t.canSubmit||t.loading},on:{click:t.submit}},[r("span",{staticClass:"mr-2"},[t._v("Fetch")]),t.loading?r("i",{staticClass:"fas fa-spinner fa-spin"}):r("i",{staticClass:"fas fa-cloud-download-alt"})])]),r("router-view",{attrs:{name:"table",entries:t.entries}}),t.resource?r("div",{staticClass:"my-2"},[r("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.onCleanClick}},[r("span",{staticClass:"mr-2"},[t._v("clean results")]),r("i",{staticClass:"fas fa-redo"})])]):t._e(),r("ResourceContainer",{staticClass:"my-2"})],1)},a=[],i=(r("ffc1"),r("96cf"),r("3b8d")),s=(r("a481"),r("ac6a"),r("cadf"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{staticClass:"fhir-form my-2"},[r("div",{staticClass:"form-group mb-2"},[r("label",{staticClass:"mr-2 font-weight-bold",attrs:{for:"mrn"}},[t._v("Medical Record Number")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.mrn,expression:"mrn"}],staticClass:"form-control",attrs:{type:"text",id:"mrn",placeholder:"MRN"},domProps:{value:t.mrn},on:{input:function(e){e.target.composing||(t.mrn=e.target.value)}}})]),r("div",{staticClass:"extra-fields"},[t._t("default")],2)])}),o=[],c={name:"FhirForm",components:{},data:function(){return{loading:!1}},props:{method_name:{type:String,default:""},resource_type:{type:String,default:""}},computed:{mrn:{get:function(){return this.$store.state.endpoint.mrn},set:function(t){this.$store.dispatch("endpoint/setMRN",t)}},canSubmit:function(){return Boolean(this.mrn.trim())}},methods:{}},u=c,l=(r("25ea"),r("2877")),d=Object(l["a"])(u,s,o,!1,null,"b3564874",null),f=d.exports,h=r("cd13"),v={name:"FhirResource",components:{FhirForm:f,ResourceContainer:h["a"]},data:function(){return{loading:!1,methods:["search","read"]}},created:function(){var t=this.$route,e=t.meta.resource_type,r=t.params.method;this.query=this.$route.query,this.$store.dispatch("endpoint/setResourceType",e),this.$store.dispatch("endpoint/setInteraction",r)},computed:{resource:function(){var t=this.$store.state.resource.resource,e=void 0===t?{}:t;return e},resource_type:function(){var t=this.$store.state.endpoint.resource_type;return t},interaction:function(){var t=this.$store.state.endpoint.interaction;return t},mrn:function(){return this.$store.state.endpoint.mrn},user_info:function(){return this.$store.state.user.info},entries:function(){try{var t=this.$store.state.resource.entries;return t}catch(e){return console.log(e),[]}},canSubmit:function(){try{var t=this.user_info.has_valid_access_token,e=void 0!==t&&t;return Boolean(e&&this.resource_type&&this.interaction&&this.mrn.trim())}catch(r){return console.log(r),!1}}},watch:{$route:function(t){var e=t.meta.resource_type,r=t.params.method;this.$store.dispatch("endpoint/setResourceType",e),this.$store.dispatch("endpoint/setInteraction",r)}},methods:{getExtraFieldsQuery:function(){return this.$refs.extra_fields?"function"!==typeof this.$refs.extra_fields.getQuery?{}:this.$refs.extra_fields.getQuery():{}},updateRouteQuery:function(t){var e=JSON.stringify(this.$route.query),r=JSON.stringify(t);if(e!==r)try{return this.$router.replace({query:t}),!0}catch(n){return console.log(n),!1}},submit:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r,n,a,i,s,o,c,u,l,d,f,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.canSubmit){t.next=2;break}return t.abrupt("return");case 2:return e=this.resource_type,r=this.interaction,n=this.mrn,a=this.$route.query,i=this.getExtraFieldsQuery(),s=Object.entries(i),t.prev=8,this.loading=!0,this.updateRouteQuery(i),t.next=13,this.$store.dispatch("resource/fetchResource",{resource_type:e,interaction:r,mrn:n,params:s});case 13:t.next=23;break;case 15:t.prev=15,t.t0=t["catch"](8),this.updateRouteQuery(a),console.error(t.t0),o=t.t0.error,c=t.t0.response,u=void 0===c?{}:c,l=u.data,d=void 0===l?{}:l,f=d.message,h=void 0===f?o:f,this.$swal.fire({title:"Error",icon:"error",text:h||o});case 23:return t.prev=23,this.loading=!1,t.finish(23);case 26:case"end":return t.stop()}}),t,this,[[8,15,23,26]])})));function e(){return t.apply(this,arguments)}return e}(),onCleanClick:function(){this.$store.dispatch("resource/reset")}}},p=v,m=Object(l["a"])(p,n,a,!1,null,"12801958",null);e["default"]=m.exports},a481:function(t,e,r){"use strict";var n=r("cb7c"),a=r("4bf8"),i=r("9def"),s=r("4588"),o=r("0390"),c=r("5f1b"),u=Math.max,l=Math.min,d=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,v=function(t){return void 0===t?t:String(t)};r("214f")("replace",2,(function(t,e,r,p){return[function(n,a){var i=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,i,a):r.call(String(i),n,a)},function(t,e){var a=p(r,t,this,e);if(a.done)return a.value;var d=n(t),f=String(this),h="function"===typeof e;h||(e=String(e));var y=d.global;if(y){var g=d.unicode;d.lastIndex=0}var b=[];while(1){var _=c(d,f);if(null===_)break;if(b.push(_),!y)break;var C=String(_[0]);""===C&&(d.lastIndex=o(f,i(d.lastIndex),g))}for(var $="",k=0,x=0;x<b.length;x++){_=b[x];for(var w=String(_[0]),j=u(l(s(_.index),f.length),0),O=[],R=1;R<_.length;R++)O.push(v(_[R]));var S=_.groups;if(h){var A=[w].concat(O,j,f);void 0!==S&&A.push(S);var K=String(e.apply(void 0,A))}else K=m(w,f,j,O,S,e);j>=k&&($+=f.slice(k,j)+K,k=j+w.length)}return $+f.slice(k)}];function m(t,e,n,i,s,o){var c=n+t.length,u=i.length,l=h;return void 0!==s&&(s=a(s),l=f),r.call(o,l,(function(r,a){var o;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(c);case"<":o=s[a.slice(1,-1)];break;default:var l=+a;if(0===l)return r;if(l>u){var f=d(l/10);return 0===f?r:f<=u?void 0===i[f-1]?a.charAt(1):i[f-1]+a.charAt(1):r}o=i[l-1]}return void 0===o?"":o}))}}))},ae68:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"json",class:{collapsed:t.collapsed,activeValue:t.activeValue}},[t.showKey?r("div",{staticClass:"key",class:{active:t.activeKey},attrs:{title:t.path},on:{click:function(e){return t.onKeyClick(t.key_name,e)}}},[t._v('"'+t._s(t.key_name)+'":')]):t._e(),t.value&&"object"===typeof t.value?[r("div",{staticClass:"parenthesis"},[t._v(t._s("array"===t.type?"[":"{"))]),r("div",{staticClass:"children-toggler",on:{click:t.toggleChildren}},[t._v("â–¶")]),t.valueIsEmpty?t._e():[t.collapsed?r("div",{staticClass:"ellipsis",on:{click:t.toggleChildren}},[t._v("...")]):r("div",{staticClass:"node"},t._l(t.value,(function(e,n,a){return r("div",{key:n,staticClass:"item"},[r("JsonObject",{attrs:{key_name:n,value:e,depth:t.depth+1}}),a<Object.keys(t.value).length-1?r("span",[t._v(",")]):t._e()],1)})),0)],r("div",{staticClass:"parenthesis"},[t._v(t._s("array"===t.type?"]":"}"))])]:[null==t.value?r("div",{staticClass:"value"},[t._v("null")]):r("div",{staticClass:"value",class:{active:t.activeValue},on:{click:function(e){return t.onValueClick(t.value,e)}}},[t._v('"'+t._s(t.value)+'"')])]],2)},a=[],i=(r("ac6a"),r("cadf"),r("456d"),r("7f7f"),r("7618")),s=(r("c5f6"),r("e343")),o={name:"JsonObject",data:function(){return{collapsed:!1,activeValue:!1,activeKey:!1}},props:{depth:{type:Number,default:0},value:{default:null},key_name:{type:[String,Number],default:null}},created:function(){var t=this;s["a"].$on("keyClicked",(function(e,r){var n=r.shiftKey;t.setActiveKey(e,n)})),s["a"].$on("valueClicked",(function(e,r){var n=r.shiftKey;t.setActiveValue(e,n)}))},computed:{type:function(){return"object"!==Object(i["a"])(this.value)?Object(i["a"])(this.value):Array.isArray(this.value)?"array":"object"},path:function(){if(null!==this.key_name){var t=[this.key_name],e=this.$parent;while(e.$options.name===this.$options.name)null!==e.key_name&&t.push(e.key_name),e=e.$parent;return t.reverse()}},valueIsEmpty:function(){var t=this.value;return"object"===Object(i["a"])(t)?Array.isArray(t)?t.length<1:Object.keys(t).length<1:Boolean(t)},isObject:function(){return"object"===Object(i["a"])(this.value)&&!Array.isArray(this.value)},showKey:function(){return this.$parent.isObject}},methods:{setActiveKey:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._uid===t._uid?this.activeKey=!this.activeKey:e||(this.activeKey=!1)},setActiveValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._uid===t._uid?this.activeValue=!this.activeValue:e||(this.activeValue=!1)},toggleChildren:function(){this.collapsed=!this.collapsed},onKeyClick:function(t,e){s["a"].$emit("keyClicked",this,e),console.log(t,this.path)},onValueClick:function(t,e){s["a"].$emit("valueClicked",this,e),console.log({value:t,path:this.path})}}},c=o,u=(r("2735"),r("2877")),l=Object(u["a"])(c,n,a,!1,null,"8c035572",null);e["a"]=l.exports},cd13:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"resource-container"}},[t._t("default"),t.source?r("ResourceRawData",{attrs:{raw_data:t.source}}):t._e()],2)},a=[],i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("details",[r("summary",[t._v("source")]),r("JsonObject",{attrs:{value:t.raw_data}}),r("button",{staticClass:"btn btn-primary",on:{click:t.copyData}},[t._v("copy")])],1)])},s=[],o=r("ae68"),c=(r("e343"),{name:"ResourceRawData",components:{JsonObject:o["a"]},props:{raw_data:{type:Object,default:function(){return{}}}},methods:{onKeyClick:function(t){var e=t.key,r=t.path;console.log(arguments),this.$store.dispatch("mappings/setKey",{key:e,path:r})},onValueClick:function(t){var e=t.value,r=t.path;console.log(arguments),this.$store.dispatch("mappings/setValues",{value:e,path:r})},prettify:function(t){var e=JSON.stringify(t,null,2);return e},copyToClipboard:function(t){var e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);var r=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);e.select(),document.execCommand("copy"),document.body.removeChild(e),r&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(r))},copyData:function(){var t=this.prettify(this.raw_data);this.copyToClipboard(t),alert("copied!")}}}),u=c,l=(r("2770"),r("2877")),d=Object(l["a"])(u,i,s,!1,null,"71e5c08e",null),f=d.exports,h={name:"resource-container",components:{ResourceRawData:f},data:function(){return{}},computed:{resource:function(){var t=this.$store.state.resource.resource,e=void 0===t?{}:t;return e},data:function(){var t=this.resource.data,e=void 0===t?{}:t;return e},source:function(){try{var t=this.resource.metadata.source,e=void 0===t?{}:t;return e}catch(r){return!1}}},methods:{}},v=h,p=Object(l["a"])(v,n,a,!1,null,"1b7fcfd6",null);e["a"]=p.exports},e343:function(t,e,r){"use strict";var n=r("8bbf"),a=r.n(n);e["a"]=new a.a},ffc1:function(t,e,r){var n=r("5ca1"),a=r("504c")(!0);n(n.S,"Object",{entries:function(t){return a(t)}})}}]);
//# sourceMappingURL=mapping_helper_vue.umd.min.3.js.map