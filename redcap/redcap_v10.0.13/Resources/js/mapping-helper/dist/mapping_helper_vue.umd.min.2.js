(("undefined"!==typeof self?self:this)["webpackJsonpmapping_helper_vue"]=("undefined"!==typeof self?self:this)["webpackJsonpmapping_helper_vue"]||[]).push([[2],{"0336":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("e6ff"),n("c368");var s=n("c1df"),o=n.n(s),r=n("7eac"),a=function(e){if(!e)return"";var t=o()(e).format(r["a"]);return t}},"0a81":function(e,t,n){},"1af6":function(e,t,n){var s=n("63b6");s(s.S,"Array",{isArray:n("9003")})},"20fd":function(e,t,n){"use strict";var s=n("d9f6"),o=n("aebd");e.exports=function(e,t,n){t in e?s.f(e,t,o(0,n)):e[t]=n}},"21a6":function(e,t,n){(function(n){var s,o,r;(function(n,a){o=[],s=a,r="function"===typeof s?s.apply(t,o):s,void 0===r||(e.exports=r)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function s(e,t,n){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){i(s.response,t,n)},s.onerror=function(){console.error("could not download file")},s.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(s){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,i=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype?function(e,t,n){var i=a.URL||a.webkitURL,c=document.createElement("a");t=t||e.name||"download",c.download=t,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?r(c):o(c.href)?s(e,t,n):r(c,c.target="_blank")):(c.href=i.createObjectURL(e),setTimeout((function(){i.revokeObjectURL(c.href)}),4e4),setTimeout((function(){r(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,a){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,a),n);else if(o(e))s(e,n,a);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout((function(){r(i)}))}}:function(e,t,n,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return s(e,t,n);var r="application/octet-stream"===e.type,i=/constructor/i.test(a.HTMLElement)||a.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||r&&i)&&"object"==typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},d.readAsDataURL(e)}else{var f=a.URL||a.webkitURL,l=f.createObjectURL(e);o?o.location=l:location.href=l,o=null,setTimeout((function(){f.revokeObjectURL(l)}),4e4)}});a.saveAs=i.saveAs=i,e.exports=i}))}).call(this,n("c8ba"))},4678:function(e,t,n){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"73332","./en-il.js":"73332","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df48","./fa.js":"8df48","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b46","./gd.js":"f6b46","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=r,e.exports=o,o.id="4678"},"549b":function(e,t,n){"use strict";var s=n("d864"),o=n("63b6"),r=n("241e"),a=n("b0dc"),i=n("3702"),c=n("b447"),d=n("20fd"),f=n("7cd6");o(o.S+o.F*!n("4ee1")((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,o,l,u=r(e),b="function"==typeof this?this:Array,p=arguments.length,h=p>1?arguments[1]:void 0,j=void 0!==h,v=0,m=f(u);if(j&&(h=s(h,p>2?arguments[2]:void 0,2)),void 0==m||b==Array&&i(m))for(t=c(u.length),n=new b(t);t>v;v++)d(n,v,j?h(u[v],v):u[v]);else for(l=m.call(u),n=new b;!(o=l.next()).done;v++)d(n,v,j?a(l,h,[o.value,v],!0):o.value);return n.length=v,n}})},"54a1":function(e,t,n){n("6c1c"),n("1654"),e.exports=n("95d5")},"75fc":function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var s=n("a745"),o=n.n(s);function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function a(e){if(o()(e))return r(e)}var i=n("774e"),c=n.n(i),d=n("c8bb"),f=n.n(d),l=n("67bb"),u=n.n(l);function b(e){if("undefined"!==typeof u.a&&f()(Object(e)))return c()(e)}function p(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?c()(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(e){return a(e)||b(e)||p(e)||h()}},"774e":function(e,t,n){e.exports=n("d2d5")},"8c8a":function(e,t,n){},"95d5":function(e,t,n){var s=n("40c3"),o=n("5168")("iterator"),r=n("481b");e.exports=n("584a").isIterable=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||r.hasOwnProperty(s(t))}},"95d6":function(e,t,n){"use strict";var s=n("8c8a"),o=n.n(s);o.a},a745:function(e,t,n){e.exports=n("f410")},c8bb:function(e,t,n){e.exports=n("54a1")},d2d5:function(e,t,n){n("1654"),n("549b"),e.exports=n("584a").Array.from},e1e7:function(e,t,n){"use strict";var s=n("0a81"),o=n.n(s);o.a},e423:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.filtered_codings.length?n("div",[n("section",[n("p",{domProps:{innerHTML:e._s(e.lang["mapping_helper_04"])}})]),n("table",{staticClass:"table table-striped table-bordered"},[n("thead",[n("th",[e._v("Description (from EHR, not from REDCap mapping)")]),n("th",[e._v("Code\n        ")]),n("th",[e._v("System")]),n("th",[e._v("Value")]),n("th",[e._v("Date/time of service")]),n("th",[n("span",[e._v("Actions")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.exportable.length>0,expression:"exportable.length>0"}]},[n("div",{staticClass:"btn-group",attrs:{role:"group"}},[n("button",{staticClass:"btn btn-sm",class:{"btn-success":e.codes_to_export.length>=1,"btn-info":e.codes_to_export.length<1},attrs:{type:"button"},on:{click:e.toggleExportableSelection}},[n("span",[e._v(e._s(e.exportable.length===e.codes_to_export.length?"deselect all":"select all")+" "),n("i",{staticClass:"fas fa-check-square"})])]),n("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",disabled:e.codes_to_export.length<1},on:{click:e.showPreview}},[e._m(0)])])])])]),n("tbody",e._l(e.filtered_codings,(function(t,s){return n("tr",{key:s},[n("td",[e._v(e._s(t.display))]),n("td",[n("div",[n("span",[e._v(e._s(t.code))])])]),n("td",[e._v(e._s(t.system))]),n("td",[e._v(e._s(t.value))]),n("td",[e._v(e._s(e.formatDate(t.date)))]),n("td",[e.isBlocklisted(t.code)?n("section",[n("div",[n("small",[n("em",[e._v("(this code is not used in REDCap: "+e._s(e.isBlocklisted(t.code))+")")])])])]):e._e(),e.isAvailableInREDCap(t.code)?e._e():n("section",[n("button",{staticClass:"btn btn-sm btn-outline-warning",on:{click:function(n){return e.displayNewCodeInfo(t)}}},[e._v("\n              info "),n("i",{staticClass:"fas fa-info-circle"})]),n("div",[n("small",{style:{color:"red"}},[e._v("(not available in REDCap)")])])]),e.isExportable(t.code)?n("section",[n("button",{staticClass:"btn btn-sm",class:{"btn-success":e.isCodeSelected(t.code),"btn-info":!e.isCodeSelected(t.code)},attrs:{type:"button"},on:{click:function(n){return e.toggleSelect(t.code)}}},[e._v(e._s(e.isCodeSelected(t.code)?"deselect":"select"))]),e._m(1,!0)]):e._e()])])})),0)])]):e._e()},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e._v("Export "),n("i",{staticClass:"fas fa-download"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("small",[n("em",[e._v("(not mapped in your project)")])])])}],r=(n("96cf"),n("3b8d")),a=(n("cadf"),n("75fc")),i=(n("ac6a"),n("8bbf")),c=n.n(i),d=n("21a6"),f=n("0336"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"download-preview"},[e._m(0),n("ul",e._l(e.lines,(function(t,s){return n("li",{key:s},[e._v("\n      "+e._s(t)+"\n    ")])})),0)])},u=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("The following data will be exported to a file."),n("br"),e._v("\n  You can use the exported fields as a refrence for mapping new values in REDCap.")])}],b={name:"download-preview",props:{lines:{type:Array,default:function(){return[]}}}},p=b,h=(n("95d6"),n("2877")),j=Object(h["a"])(p,l,u,!1,null,"ccab0d52",null),v=j.exports,m={name:"ObservationTable",data:function(){return{hide_blocklisted:!1,show_groups:!1,codes_to_export:[],internal_codes:null}},props:{entries:{type:Array,default:function(){return[]}}},computed:{lang:function(){var e=this.$store.state.settings.settings.lang;return e},codes_blocklist:function(){var e=this.$store.state.settings.settings.blocklisted_codes;return e},values_to_export:function(){var e=this,t=[],n=[];return this.filtered_codings.forEach((function(s){e.codes_to_export.indexOf(s.code)>=0&&n.indexOf(s.code)<0&&(n.push(s.code),t.push(s))})),t},mapped_codes:function(){var e=this.$store.getters["project/mappedCodes"];return e},fhir_metadata_codes:function(){var e=this.$store.state.fhir_metadata.codes;return e},codings:function(){try{var e=Object(a["a"])(this.entries);if(!Array.isArray(e))return;var t=e.reduce((function(e,t){return[].concat(Object(a["a"])(e),Object(a["a"])(t.codings))}),[]);return t}catch(n){return[]}},filtered_codings:function(){var e=this,t=this.codings;return this.hide_blocklisted?t.filter((function(t){return!e.isBlocklisted(t.code)})):t},exportable:function(){var e=this,t=this.filtered_codings,n=[];return t.forEach((function(t){var s=t.code,o=void 0===s?"":s;e.isExportable(o)&&(n.indexOf(o)>=0||n.push(o))})),n}},methods:{toggleSelect:function(e){var t=this.codes_to_export.indexOf(e);t<0?this.codes_to_export.push(e):this.codes_to_export.splice(t,1)},isCodeSelected:function(e){return this.codes_to_export.indexOf(e)>=0},toggleExportableSelection:function(){this.exportable.length===this.codes_to_export.length?this.codes_to_export=[]:this.codes_to_export=Object(a["a"])(this.exportable)},isAvailableInREDCap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""==e.trim())return!0;if(this.isBlocklisted(e))return!0;var t=this.fhir_metadata_codes,n=t.some((function(t){return t===e}));return n},isBlocklisted:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.codes_blocklist.map((function(e){return e.code})),n=t.indexOf(e);return n>=0&&this.codes_blocklist[n].reason},isMappedInProject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""==e.trim())return!0;if(this.isBlocklisted(e))return!0;var t=this.mapped_codes;return t.indexOf(e)>=0},isExportable:function(e){var t=this.isAvailableInREDCap(e),n=this.isMappedInProject(e);return t&&!n},displayNewCodeInfo:function(e){var t=e.code;this.$swal.fire({title:"Code '".concat(t,"' not available"),icon:"info",text:"".concat(this.lang["mapping_helper_03"])})},sendNotification:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,s,o,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.code,s=this.$store.state.endpoint,o=s.resource_type,r=s.interaction,a=s.mrn,e.prev=2,e.next=5,this.$API.sendNotification({code:n,resource_type:o,interaction:r,mrn:a});case 5:this.$swal.fire({title:"Success",icon:"success",text:"Your request has been sent to an admin."}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),this.$swal.fire({title:"Error",icon:"error",text:"There was an error sending your request."});case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));function t(t){return e.apply(this,arguments)}return t}(),getLinesToExport:function(){var e=[];return this.values_to_export.forEach((function(t){var n="".concat(t.code,"\t").concat(t.display);e.push(n)})),e},showPreview:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,s,o,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.getLinesToExport(),n=c.a.extend(v),s={propsData:{lines:t},store:this.$store,created:function(){console.log(this.$store)}},e.next=5,this.$swal.fire({icon:"info",title:"Export fields",confirmButtonText:"Download",component:n,component_args:s});case 5:o=e.sent,r=o.value,a=void 0!==r&&r,a&&this.exportData(t);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),exportData:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.join("\n"),s=new Blob([n],{type:"text/plain;charset=utf-8"}),Object(d["saveAs"])(s,"fields.txt");case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),formatDate:f["a"]}},_=m,g=(n("e1e7"),Object(h["a"])(_,s,o,!1,null,"5cf657c3",null));t["default"]=g.exports},f410:function(e,t,n){n("1af6"),e.exports=n("584a").Array.isArray}}]);
//# sourceMappingURL=mapping_helper_vue.umd.min.2.js.map