(("undefined"!==typeof self?self:this)["webpackJsonpdatamart_vue"]=("undefined"!==typeof self?self:this)["webpackJsonpdatamart_vue"]||[]).push([[4],{"15c4":function(t,e,s){"use strict";var n=s("fd25"),r=s.n(n);r.a},"1bb0":function(t,e,s){},"38c1":function(t,e,s){},"437d":function(t,e,s){"use strict";var n=s("e874"),r=s.n(n);r.a},4879:function(t,e,s){},"4b45":function(t,e,s){"use strict";var n=s("dab4"),r=s.n(n);r.a},"644a":function(t,e,s){},"6ac3":function(t,e,s){},"6f25":function(t,e,s){},"76d5":function(t,e,s){"use strict";var n=s("6ac3"),r=s.n(n);r.a},"7d97":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[t._m(0),t._m(1),t.revision?s("div",{staticClass:"top-container card mb-4"},[t._m(2),s("div",{staticClass:"card-body py-2 px-3"},[s("section",{staticClass:"buttons"},[s("RevisionSelect"),s("RunRevisionSplitButton")],1),t._l(t.warnings,(function(t,e){return s("InfoPanel",{key:e,attrs:{summary:t.summary,description:t.description,type:t.type}})}))],2)]):t._e(),t.revision&&t.user?s("div",{staticClass:"details-container"},[s("RevisionDetail",{attrs:{revision:t.revision},scopedSlots:t._u([{key:"header",fn:function(){},proxy:!0},{key:"footer",fn:function(){return[s("section",{staticClass:"buttons"},[t.user.isAdmin()&&t.totalRevisions>1?s("DeleteRevisionButton"):t._e(),t.revision.canBeUsedByUserForNewRevision(t.user)?s("CreateRevisionButton"):t._e(),t.user.canApproveRevision(t.revision)?s("ApproveRevisionButton"):t._e()],1)]},proxy:!0}],null,!1,2526346462)})],1):t._e()])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"projhdr mb-2"},[s("i",{staticClass:"fas fa-shopping-cart"}),t._v(" Clinical Data Mart ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"mb-2"},[t._v(' Listed below is the current Data Mart configuration for this project. If you have appropriate privileges, you may run the "Fetch clinical data" button to retrieve data from the EHR. When fetching, any existing patients will have new data added to their record in the project. If you have permission to create new revisions of the current Data Mart configuration, you will see a "Request a configuration change" button at the bottom of the page. When submitted, all configuration revisions must be approved by a REDCap administrator before taking effect in the project.'),s("br"),t._v(" If a revision contains a list of Medical Record Numbers, those not yet in the project will be created as new records as soon as the revision is approved. ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header"},[s("span",{staticClass:"title"},[t._v("Revision")])])}],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"alert",class:t._type,attrs:{role:"warning"}},[s("span",{staticClass:"title",domProps:{innerHTML:t._s(t.summary)}}),s("div",{domProps:{innerHTML:t._s(t.description)}})])},i=[],o=(s("dca8"),s("5530")),c=Object.freeze({primary:"alert-primary",secondary:"alert-secondary",success:"alert-success",danger:"alert-danger",warning:"alert-warning",info:"alert-info",light:"alert-light",dark:"alert-dark"}),l={name:"InfoPanel",data:function(){return{types:Object(o["a"])({},c)}},props:{summary:{type:String,default:""},description:{type:String,default:""},type:{type:String,default:""}},computed:{_type:function(){var t=this.types[this.type];return t||this.types.info}}},u=l,d=(s("82b6"),s("2877")),f=Object(d["a"])(u,a,i,!1,null,"578298d8",null),p=f.exports,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Dropdown",{attrs:{id:"revision-selector",text:t.buttonText},scopedSlots:t._u([t.userIsAdmin?{key:"items",fn:function(){return t._l(t.revisions,(function(e,n){return s("a",{key:n,staticClass:"menu-item",class:{selected:t.isCurrent(e),approved:e.isApproved()},attrs:{href:"#"},on:{click:function(s){return t.onSelect(e,s)}}},[s("section",{staticClass:"info"},[s("span",{staticClass:"badge badge-info"},[t._v(t._s(e.index))]),s("span",[t._v(" Revision date: "+t._s(e.metadata.date))])]),s("RevisionMetadataIcons",{staticClass:"metadata-icons",attrs:{revision:e}})],1)}))},proxy:!0}:null],null,!0)})},v=[],m=s("cd0b"),_=s("5136"),b={name:"RevisionList",components:{Dropdown:m["a"],RevisionMetadataIcons:_["a"]},computed:{revisions:function(){return this.$store.state.revisions.list},selected:function(){return this.$store.getters["revisions/selected"]},isCurrent:function(){var t=this;return function(e){if(null==t.selected)return!1;try{return t.selected.metadata.id==e.metadata.id}catch(s){return!1}}},buttonText:function(){return this.userIsAdmin&&1!=this.revisions.length?this.selected?"Revision ".concat(this.selected.index):"Select a revision":this.selected?"Revision ".concat(this.selected.index):"no revisions"},userIsAdmin:function(){var t=this.$store.state.user.info;if(!t)return!1;var e=t.super_user,s=void 0!==e&&e;return s}},methods:{onSelect:function(t,e){e.preventDefault();var s=t.metadata.id;this.$store.dispatch("revisions/setSelected",s)}}},g=b,w=(s("ee53"),Object(d["a"])(g,h,v,!1,null,"8536c03c",null)),y=w.exports,C=s("2ffe"),x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("SplitButton",{attrs:{btn_class:"btn btn-success",dropdown_disabled:t.mrn_list.length<1},scopedSlots:t._u([{key:"button",fn:function(){return[s("RunRevisionButton")]},proxy:!0},{key:"dropdown-content",fn:function(){return[s("MrnSelect",{attrs:{mrn_list:t.mrn_list}})]},proxy:!0}])})},k=[],$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"container",staticClass:"split-button",attrs:{tabindex:"0"},on:{mousedown:t.onMouseDown,blur:t.onBlur}},[s("div",{staticClass:"btn-group"},[t._t("button",[s("button",{class:t.btn_class,attrs:{type:"button"}},[s("span",[t._v("Split dropright")])])]),s("button",{class:t.btn_class,attrs:{type:"button",disabled:t.dropdown_disabled},on:{click:t.toggle}},[t.collapsed?s("i",{staticClass:"fas fa-caret-down status-indicator",attrs:{"data-v-18f96775":""}}):s("i",{staticClass:"fas fa-caret-up status-indicator",attrs:{"data-v-18f96775":""}})])],2),s("div",{staticClass:"dropdown-content",class:{collapsed:t.collapsed}},[t._t("dropdown-content")],2)])},R=[],S=s("8bbf"),E=s.n(S),O={name:"SplitButton",data:function(){return{collapsed:!0}},props:{btn_class:{type:String,default:"btn btn-primary"},dropdown_disabled:{type:Boolean,default:!1}},methods:{onMouseDown:function(t){this.keepFocus()},onBlur:function(t){var e=t.relatedTarget;this.$refs.container.contains(e)?this.keepFocus():this.collapse()},toggle:function(){this.collapsed=!this.collapsed},keepFocus:function(){this.$refs.container.focus()},collapse:function(){this.collapsed=!0}}},j=O,M=(s("76d5"),Object(d["a"])(j,$,R,!1,null,"dd0177d6",null)),B=M.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"btn btn-sm btn-success",attrs:{disabled:t.disabled,title:t.title},on:{click:t.onClick}},[s("i",{staticClass:"fas fa-cloud-download-alt"}),t._v(" Fetch clinical data "),s("span",{staticClass:"badge badge-light"},[t._v(t._s(t.totalMrns))])])},D=[],A=(s("99af"),s("4fad"),s("d3b7"),s("e6cf"),s("b85c")),I=(s("96cf"),s("1da1")),P=s("3835"),L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.is_processing?s("div",[s("h2",[t._v("Fetching data")]),s("div",[s("p",{staticClass:"time"},[t._v("Elapsed time: "),s("span",{staticClass:"stopwatch"},[t._v(t._s(t.fixed_time)+" ("+t._s(t.readable_time)+")")])]),s("ProgressBar",{ref:"progress_bar",staticClass:"mb-2",attrs:{value:t.progress_value,total:t.progress_total}}),s("p",[s("span",[t._v("Processing "),s("strong",[t._v(t._s(t.mrn))]),t._v(" - "+t._s(t.progress_value+1)+"/"+t._s(t.progress_total)+" ")]),s("i",{staticClass:"fas fa-spinner fa-spin"})])],1)]):s("div",[s("p",{staticClass:"time"},[t._v("The request took "+t._s(t.readable_time)+" ("+t._s(t.fixed_time)+" seconds)")]),s("div",[0==t.overall_stats_count?s("p",{staticClass:"text-center"},[t._v("Data across all patients was already up to date.")]):s("p",{staticClass:"text-center"},[t._v("Here is a summary of the data pulled across all patients:")])])]),s("transition",{attrs:{name:"fade"}},[s("Stats",{attrs:{stats:t.fhir_stats}})],1),s("transition",{attrs:{name:"fade"}},[s("FhirErrors",{staticClass:"errors-container",attrs:{errors:t.fhir_errors}})],1),!t.is_processing&&t.has_errors?s("div",[s("button",{staticClass:"btn btn-secondary mt-2",on:{click:t.selectMrns}},[t._v("Select the MRN identifiers with fetch errors")])]):t._e()],1)},N=[],F=(s("a9e3"),s("b680"),s("b64b"),s("25f0"),s("e343")),H=s("c1df"),V=s.n(H),W=s("1209"),J=s("d4ec"),q=s("bee2"),K=s("ade3"),z=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(J["a"])(this,t),Object(K["a"])(this,"time_start",0),Object(K["a"])(this,"time_end",0),Object(K["a"])(this,"is_running",!1),e&&this.start()}return Object(q["a"])(t,[{key:"start",value:function(){this.is_running||(this.time_start=performance.now(),this.is_running=!0)}},{key:"stop",value:function(){return this.is_running?(this.time_end=performance.now(),this.is_running=!1,this.total):this.total}},{key:"reset",value:function(){this.start=0,this.end=0}},{key:"total",get:function(){if(this.is_running&&this.time_start>0){var t=performance.now()-this.time_start;return t}return this.time_end-this.time_start}}]),t}(),U=z,Y=s("b6b4"),G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.total>0?s("div",{staticClass:"stats text-left"},[t.stats?s("table",{staticClass:"table table-bordered table-hover table-striped table-sm"},[t._m(0),s("transition-group",{attrs:{name:"list",tag:"tbody"}},t._l(t.animated_stats,(function(e,n){return s("tr",{key:"row-"+n,class:"resource-"+n,attrs:{scope:"col"}},[s("th",{attrs:{scope:"row"}},[t._v(t._s(n))]),s("td",{staticClass:"text-right count"},[t._v(t._s(e))])])})),0)],1):t._e()]):s("div")},Q=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",{staticClass:"thead-light"},[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Data category")]),s("th",{staticClass:"text-right",attrs:{scope:"col"}},[t._v("Total")])])])}],X=(s("cca6"),{name:"Stats",data:function(){return{animated_stats:{}}},props:{stats:{type:Object,default:function(){return{}}}},watch:{total:function(t,e){var s=this,n=function(t){isNaN(s.animated_stats[t])&&s.$set(s.animated_stats,t,0);var e=Object.assign({},s.animated_stats),n={targets:e,round:1,easing:"linear",update:function(){s.$set(s.animated_stats,t,e[t])},begin:function(e){var s=document.querySelector("tr.resource-".concat(t," .count"));s&&s.classList.add("animated")},complete:function(e){var s=document.querySelector("tr.resource-".concat(t," .count"));s&&s.classList.remove("animated")}},r=e[t],a=s.stats[t];if(r==a)return"continue";n[t]=a,Object(W["a"])(n)};for(var r in this.stats)n(r)}},computed:{total:function(){for(var t=0,e=0,s=Object.entries(this.stats);e<s.length;e++){var n=Object(P["a"])(s[e],2),r=(n[0],n[1]);t+=r}return t}},methods:{}}),Z=X,tt=(s("fede"),Object(d["a"])(Z,G,Q,!1,null,"b58725d0",null)),et=tt.exports,st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.has_errors?s("div",{staticClass:"errors"},[s("p",[t._v("Warning - the following errors occurred:")]),s("ul",{staticClass:"error-list text-left"},[s("transition-group",{attrs:{name:"list"}},t._l(t.errors,(function(e,n){return s("li",{key:"error-"+n},[s("details",[s("summary",[t._v(t._s(n))]),s("ul",{staticClass:"text-left"},t._l(e,(function(e,n){return s("li",{key:n},[s("p",{domProps:{innerHTML:t._s(e.message)}}),e.detail?s("p",[t._v(t._s(e.detail.message)+" "),s("span",[t._v("("+t._s(e.detail.code)+")")])]):t._e()])})),0)])])})),0)],1)]):s("div")},nt=[],rt={name:"FhirErrors",data:function(){return{}},props:{errors:{type:Object,default:function(){return{}}}},computed:{has_errors:function(){return Object.keys(this.errors).length>0}},methods:{}},at=rt,it=(s("4b45"),Object(d["a"])(at,st,nt,!1,null,"d71fed0a",null)),ot=it.exports,ct={name:"",components:{ProgressBar:Y["a"],Stats:et,FhirErrors:ot},data:function(){return{stopwatch:new U(!1),time:0,stopwatch_interval:null,fhir_errors:{},fhir_stats:{},overall_stats_count:0}},destroyed:function(){this.clearInterval()},props:{progress_value:{type:Number,default:0},progress_total:{type:Number,default:0},mrn_list:{type:Array,default:function(){return[]}},mrn:{type:String,default:""}},computed:{is_processing:function(){return this.progress_value<this.progress_total},fixed_time:function(){var t=this.time/1e3;return t.toFixed(2)},readable_time:function(){this.time;return V.a.duration(this.time,"milliseconds").humanize()},has_errors:function(){return Object.keys(this.fhir_errors).length>0}},watch:{progress_value:function(t){t>=this.progress_total&&this.stopWatch()}},methods:{startWatch:function(){var t=this;this.stopwatch.start(),this.stopwatch_interval=setInterval((function(){t.time=t.stopwatch.total}),10)},stopWatch:function(){this.stopwatch.stop(),clearInterval()},selectMrns:function(){var t=Object.keys(this.fhir_errors);F["a"].$emit("SET_SELECTED_MRNS",t)},clearInterval:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){this.stopwatch_interval&&clearInterval(this.stopwatch_interval)})),addResults:function(t,e){var s={charged:"0%",cycles:120};Object(W["a"])({targets:s,charged:"100%",cycles:130,round:1,easing:"linear",update:function(){JSON.stringify(s)}});for(var n=e.errors,r=void 0===n?[]:n,a=e.metadata.stats,i=void 0===a?[]:a,o=0,c=Object.entries(i);o<c.length;o++){var l=Object(P["a"])(c[o],2),u=l[0],d=l[1];this.overall_stats_count+=d;var f=this.fhir_stats[u]||0;this.$set(this.fhir_stats,u,d+f)}r.length>0&&this.$set(this.fhir_errors,t,r)}}},lt=ct,ut=(s("15c4"),Object(d["a"])(lt,L,N,!1,null,"941a12b6",null)),dt=ut.exports,ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.errors.length>0?s("div",{staticClass:"json-error"},[t.error?s("div",[s("p",{staticClass:"error-title",domProps:{innerHTML:t._s(t.error.title)}}),s("p",{staticClass:"error-detail",domProps:{innerHTML:t._s(t.error.detail)}})]):s("ul",t._l(t.errors,(function(e,n){return s("li",{key:n},[s("p",{staticClass:"error-title",domProps:{innerHTML:t._s(e.title)}}),s("p",{staticClass:"error-detail",domProps:{innerHTML:t._s(e.detail)}})])})),0)]):t._e()},pt=[],ht={name:"JsonError",props:{errors:{type:Array,default:function(){return[]}}},computed:{error:function(){return 1===this.errors.length&&this.errors[0]}}},vt=ht,mt=(s("c49f"),Object(d["a"])(vt,ft,pt,!1,null,"097f77f5",null)),_t=mt.exports,bt=(s("710e"),{promise:null,abort:!1}),gt={name:"RunRevisionButton",data:function(){return Object(o["a"])({},bt)},computed:{title:function(){var t=this.totalMrns,e=1===t?"":"s";return t<1?"Data can not be fetched":"Fetch data for ".concat(t," record").concat(e)},revision:function(){return this.$store.getters["revisions/selected"]},totalMrns:function(){var t=this.$store.state.mrns.list||[];return t.length},disabled:function(){try{if(!this.revision)return!0;var t=this.$store.getters["revisions/isActive"](this.revision),e=(this.totalMrns,this.$store.state.user.info);return!t||!e.hasValidToken()||this.totalMrns<1}catch(s){return!0}}},methods:{resetData:function(){for(var t=0,e=Object.entries(bt);t<e.length;t++){var s=Object(P["a"])(e[t],2),n=s[0],r=s[1];this[n]=r}},wait:function(t){return new Promise((function(e){return setTimeout(e,t)}))},onClick:function(){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function e(){var s,n,r,a,i,o,c,l,u,d,f,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.prev=0,s=t.revision.metadata.id,n=t.$store.state.mrns.list||[],r=t.$swal.fire({allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,showCancelButton:!0}),t.$swal.addVueComponent(dt),a=t.$swal.getComponent(),a.startWatch(),r.then((function(e){var s=e.dismiss;s&&"cancel"===s&&(t.abort=!0,t.promise.cancelToken.cancel("operation canceled by user"))})),i=n.length,a.progress_total=i,a.mrn_list=i,o={},c=Object(A["a"])(n),e.prev=13,c.s();case 15:if((l=c.n()).done){e.next=30;break}if(u=l.value,!t.abort){e.next=19;break}return e.abrupt("break",30);case 19:return a.mrn=u,t.promise=E.a.$API.runRevision(s,u),e.next=23,t.promise;case 23:d=e.sent,a.progress_value++,f=d.data,o[u]=f,a.addResults(u,f);case 28:e.next=15;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e["catch"](13),c.e(e.t0);case 35:return e.prev=35,c.f(),e.finish(35);case 38:p=a.has_errors?"warning":"success",t.$swal.update({icon:p,allowOutsideClick:!0,allowEscapeKey:!0,showCancelButton:!1,showConfirmButton:!0}),e.next=45;break;case 42:e.prev=42,e.t1=e["catch"](0),t.showErrorModal(e.t1);case 45:return e.prev=45,t.reloadRevisions(),t.resetData(),e.finish(45);case 49:case"end":return e.stop()}}),e,null,[[0,42,45,49],[13,32,35,38]])})))()},showErrorModal:function(t){var e=t.responseText,s=t.message,n=void 0===s?"Error fetching data":s,r=e||n;if(this.$swal.fire({icon:"error",title:r}),e){var a=JSON.parse(e),i=a.errors;this.$swal.addVueComponent(_t,{propsData:{errors:i}})}},reloadRevisions:function(){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$API.getRevisions();case 3:s=e.sent,n=s.data,t.$store.dispatch("revisions/setList",n),t.$store.dispatch("revisions/selectMostRecentRevision"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),t.$swal.fire({icon:"error",title:"error reloading the revisions",html:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}}},wt=gt,yt=(s("a1cb"),Object(d["a"])(wt,T,D,!1,null,"b913a0dc",null)),Ct=yt.exports,xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("div",{staticClass:"select-all-toggle"},[s("input",{staticClass:"mr-2",attrs:{type:"checkbox",id:"select-all"},domProps:{checked:t.is_all_selected},on:{click:t.toggleSelectAll}}),s("label",{attrs:{for:"select-all"}},[t._v("select all")])]),s("div",{staticClass:"divider"}),s("ul",{staticClass:"list"},t._l(t.mrn_list,(function(e,n){return s("li",{key:n},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selected_mrns,expression:"selected_mrns"}],staticClass:"mr-2",attrs:{type:"checkbox",id:"mrn-"+e},domProps:{value:e,checked:Array.isArray(t.selected_mrns)?t._i(t.selected_mrns,e)>-1:t.selected_mrns},on:{change:function(s){var n=t.selected_mrns,r=s.target,a=!!r.checked;if(Array.isArray(n)){var i=e,o=t._i(n,i);r.checked?o<0&&(t.selected_mrns=n.concat([i])):o>-1&&(t.selected_mrns=n.slice(0,o).concat(n.slice(o+1)))}else t.selected_mrns=a}}}),s("label",{attrs:{for:"mrn-"+e}},[t._v(t._s(e))])])})),0)])},kt=[],$t=(s("4de4"),s("caad"),s("a15b"),s("d81d"),s("2532"),{name:"MrnSelect",data:function(){return{selected_mrns:[]}},props:{mrn_list:{type:Array,default:function(){return[]}}},created:function(){this.syncSelectedMrns(),F["a"].$on("REVISION_SELECTED",this.syncSelectedMrns),F["a"].$on("SET_SELECTED_MRNS",this.setSelectedMrns)},destroyed:function(){F["a"].$off("REVISION_SELECTED",this.syncSelectedMrns),F["a"].$off("SET_SELECTED_MRNS",this.setSelectedMrns)},watch:{selected_mrns:function(){this.$store.dispatch("mrns/setList",this.selected_mrns)}},computed:{is_all_selected:function(){var t=this.mrn_list.length,e=this.selected_mrns.length;return t>0&&t===e},modal_message:function(){var t=this.selected_mrns.length,e=1==t,s="The following ".concat(t," MRN number").concat(e?" has":"s have"," been selected:");return s}},methods:{toggleSelectAll:function(){this.is_all_selected?this.selected_mrns=[]:this.selected_mrns=this.mrn_list},syncSelectedMrns:function(){this.selected_mrns=this.mrn_list},setSelectedMrns:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=e.filter((function(e){return t.mrn_list.includes(e)}));if(0!=s.length){this.selected_mrns=s;var n=this.selected_mrns.map((function(t){return"<li>".concat(t,"</li>")})).join(""),r=this.selected_mrns.length,a=1==r,i="The following ".concat(r," MRN number").concat(a?" has":"s have"," been selected:"),o='<div class="text-left" style="max-height:300px;overflow-y:scroll;"><span>'.concat(i,'</span><ul class="mt-2">').concat(n,"</ul></div>");this.$swal.fire({icon:"success",toast:!1,html:o,showConfirmButton:!0})}}}}),Rt=$t,St=(s("f48f"),Object(d["a"])(Rt,xt,kt,!1,null,"f377a442",null)),Et=St.exports,Ot={name:"RunRevisionSplitButton",components:{SplitButton:B,RunRevisionButton:Ct,MrnSelect:Et},computed:{mrn_list:function(){var t=this.$store.getters["revisions/selected"];if(!t)return[];var e=t.metadata.fetchable_mrns,s=void 0===e?[]:e;return s}}},jt=Ot,Mt=Object(d["a"])(jt,x,k,!1,null,null,null),Bt=Mt.exports,Tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"btn btn-sm btn-success",on:{click:t.onClick}},[s("i",{staticClass:"far fa-check-circle"}),t._v(" Approve")])},Dt=[],At={name:"ApproveButton",methods:{onClick:function(){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function e(){var s,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,s=t.$store.getters["revisions/selected"].metadata.id,t.$swal.fire({icon:"info",title:"approving",html:'<p class="text-center"><i class="fas fa-spinner fa-spin"></i> Please wait.</p>',allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1}),e.next=5,t.$store.dispatch("revisions/approve",s);case 5:e.sent,t.$swal.fire({toast:!0,showConfirmButton:!1,timer:3e3,position:"top-end",icon:"success",title:"Success",text:"The revision has been approved!"}),e.next=16;break;case 9:e.prev=9,e.t0=e["catch"](0),n=e.t0.responseText,r=JSON.parse(n),a=r.errors,t.$swal.fire({icon:"error",title:"error approving the revision"}),t.$swal.addVueComponent(_t,{propsData:{errors:a}});case 16:case"end":return e.stop()}}),e,null,[[0,9]])})))()}}},It=At,Pt=Object(d["a"])(It,Tt,Dt,!1,null,"777fdaa9",null),Lt=Pt.exports,Nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"btn btn-sm btn-info",on:{click:t.onClick}},[s("i",{staticClass:"fas fa-file-export"}),t._v(" Request a configuration change")])},Ft=[],Ht={name:"CreateRevisionButton",methods:{onClick:function(){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$store.dispatch("revision/setAllowedSettings",{mrns:!1}),t.$store.dispatch("revision/reset"),t.$router.push({name:"create-revision"});case 3:case"end":return e.stop()}}),e)})))()}}},Vt=Ht,Wt=(s("437d"),Object(d["a"])(Vt,Nt,Ft,!1,null,"74e9fc5e",null)),Jt=Wt.exports,qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("StyledButton",{attrs:{type:"danger",text:"Delete Revision",icon:"fas fa-trash-alt"},on:{click:t.onClick}})},Kt=[],zt=s("0342"),Ut={name:"DeleteButton",components:{StyledButton:zt["a"]},methods:{onClick:function(){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function e(){var s,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$swal.fire({icon:"warning",title:"Are you sure?",text:"you won't be able to revert this!",showCancelButton:!0,confirmButtonText:"Yes, delete it!"});case 2:if(s=e.sent,!0!==s.value){e.next=16;break}return n=t.$store.getters["revisions/selected"],r=n.metadata.id,e.prev=6,e.next=9,t.$store.dispatch("revisions/delete",r);case 9:e.sent,t.$swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,icon:"success",title:"revision deleted",text:""}),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](6),t.$swal.fire({icon:"error",showConfirmButton:!0,timer:3e3,title:"error deleting the revision",text:""});case 16:case"end":return e.stop()}}),e,null,[[6,13]])})))()}}},Yt=Ut,Gt=Object(d["a"])(Yt,qt,Kt,!1,null,"178d6b63",null),Qt=Gt.exports,Xt={name:"HomeView",data:function(){return{test:""}},components:{RevisionSelect:y,RevisionDetail:C["a"],RunRevisionSplitButton:Bt,ApproveRevisionButton:Lt,CreateRevisionButton:Jt,DeleteRevisionButton:Qt,InfoPanel:p},computed:{revision:function(){return this.$store.getters["revisions/selected"]},user:function(){return this.$store.state.user.info},totalRevisions:function(){return this.$store.getters["revisions/total"]},warnings:function(){return this.$store.dispatch("warnings/checkAll"),this.$store.state.warnings.list}}},Zt=Xt,te=(s("9022"),Object(d["a"])(Zt,n,r,!1,null,"172b6956",null));e["default"]=te.exports},"82b6":function(t,e,s){"use strict";var n=s("38c1"),r=s.n(n);r.a},9022:function(t,e,s){"use strict";var n=s("b6b7"),r=s.n(n);r.a},a1cb:function(t,e,s){"use strict";var n=s("644a"),r=s.n(n);r.a},b6b7:function(t,e,s){},c49f:function(t,e,s){"use strict";var n=s("4879"),r=s.n(n);r.a},dab4:function(t,e,s){},e03b:function(t,e,s){},e874:function(t,e,s){},ee53:function(t,e,s){"use strict";var n=s("1bb0"),r=s.n(n);r.a},f48f:function(t,e,s){"use strict";var n=s("6f25"),r=s.n(n);r.a},fd25:function(t,e,s){},fede:function(t,e,s){"use strict";var n=s("e03b"),r=s.n(n);r.a}}]);
//# sourceMappingURL=datamart_vue.umd.min.4.js.map