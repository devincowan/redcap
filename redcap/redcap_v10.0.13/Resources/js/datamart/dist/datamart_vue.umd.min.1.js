(("undefined"!==typeof self?self:this)["webpackJsonpdatamart_vue"]=("undefined"!==typeof self?self:this)["webpackJsonpdatamart_vue"]||[]).push([[1],{"03a9":function(t,e,s){},"0c35":function(t,e,s){"use strict";var i=s("4e06"),n=s.n(i);n.a},"214f":function(t,e,s){"use strict";var i=s("65a8"),n=s.n(i);n.a},"45cd":function(t,e,s){"use strict";var i=s("8066"),n=s.n(i);n.a},"4e06":function(t,e,s){},"50c7":function(t,e,s){},5636:function(t,e,s){"use strict";var i=s("f612"),n=s.n(i);n.a},"575b":function(t,e,s){"use strict";var i=s("03a9"),n=s.n(i);n.a},"65a8":function(t,e,s){},6997:function(t,e,s){},"7dd4":function(t,e,s){},8066:function(t,e,s){},8575:function(t,e,s){"use strict";var i=s("7dd4"),n=s.n(i);n.a},"894b":function(t,e,s){"use strict";var i=s("50c7"),n=s.n(i);n.a},"9c83":function(t,e,s){"use strict";var i=s("fe32"),n=s.n(i);n.a},c493:function(t,e,s){"use strict";var i=s("6997"),n=s.n(i);n.a},c63b:function(t,e,s){"use strict";s.d(e,"b",(function(){return ut}));var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"revision-manager-view"},[t.hidden_groups.includes(t.settings_groups.DATE)?t._e():s("div",{staticClass:"setting-group card"},[t._m(0),s("div",{staticClass:"card-body"},[s("DateRange"),s("ErrorList",{attrs:{errors:t.errors.date}})],1)]),t.hidden_groups.includes(t.settings_groups.FIELDS)?t._e():s("div",{staticClass:"setting-group card mt-4"},[s("div",{staticClass:"card-header"},[s("span",{staticClass:"setting-title"},[t._v("Choose fields in EHR for which to pull data")]),t._t("header")],2),s("div",{staticClass:"card-body"},[s("Fields"),s("ErrorList",{attrs:{errors:t.errors.fields}})],1)]),t.hidden_groups.includes(t.settings_groups.MRNS)?t._e():s("div",{staticClass:"setting-group card mt-4"},[t._m(1),s("div",{staticClass:"card-body"},[s("MRNListEditor"),s("ErrorList",{attrs:{errors:t.errors.mrns}})],1)])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header"},[s("span",{staticClass:"setting-title"},[t._v("If pulling time-based data, select the range of time from which to pull data (optional)")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header"},[s("span",{staticClass:"setting-title"},[t._v("Enter medical record numbers of patients to import from the EHR (one per line, optional)")])])}],a=(s("dca8"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"MRNs-wrapper"},[s("div",{staticClass:"textarea-container"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.MRN_text,expression:"MRN_text"}],domProps:{value:t.MRN_text},on:{input:function(e){e.target.composing||(t.MRN_text=e.target.value)}}}),s("aside",[s("span",[s("b",[t._v("Total MRNs:")]),t._v(" "+t._s(t.list.length))])])])])}),r=[],o=(s("a15b"),s("2ef0")),c=s("e343"),l={name:"MRNListEditor",data:function(){return{text:""}},created:function(){this.getTextFromList(),c["a"].$on("REVISION_SET",this.getTextFromList)},destroyed:function(){c["a"].$off("REVISION_SET",this.getTextFromList)},computed:{MRN_text:{get:function(){return this.text},set:function(t){this.text=t,this.updateMRNs(t)}},list:function(){return this.$store.state.revision.mrns}},methods:{getTextFromList:function(){this.text=this.list.join("\n")},updateMRNs:Object(o["debounce"])((function(t){this.$store.dispatch("revision/setMRNs",t)}),250)}},d=l,u=(s("0c35"),s("2877")),f=Object(u["a"])(d,a,r,!1,null,"33e179b0",null),h=f.exports,p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.sourceFields?s("section",{staticClass:"sourceFields"},[s("header",[s("span",[t._v("Source Fields List")]),s("section",[s("span",[t._v("Filter:")]),s("FieldsFilter")],1)]),s("main",[t._l(t.sourceFields,(function(t,e){return s("FieldNodeCheckbox",{key:e,attrs:{node:t}})})),t.noResults?s("section",[t._v("sorry no results")]):t._e()],2)]):t._e()},m=[],v=(s("b64b"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"fields-filter"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"input",attrs:{type:"text",placeholder:"search source fields by keywords"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),t.query?s("button",{on:{click:t.clear}},[s("i",{staticClass:"far fa-times-circle"})]):t._e()])}),_=[],b={name:"FieldsFilter",computed:{query:{get:function(){return this.$store.state.nodes.query},set:Object(o["debounce"])((function(t){this.setQuery(t)}),300)}},methods:{clear:function(t){t.preventDefault(),this.setQuery("")},setQuery:function(t){this.$store.dispatch("nodes/setQuery",t),this.$store.dispatch("nodes/filterNodes",t)}}},g=b,x=(s("9c83"),Object(u["a"])(g,v,_,!1,null,"d7df0afa",null)),k=x.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"node",class:t.classes},[0===t.node.data.length?[s("div",{staticClass:"checkbox-container"},[s("input",{ref:"checkbox",attrs:{id:t.node.name,type:"checkbox"},domProps:{checked:t.isChecked,value:t.node.name},on:{change:t.onChange}}),s("label",{attrs:{for:t.node.name,title:t.node.attributes.description}},[t._v(t._s(t.node.attributes.field)+" ("+t._s(t.node.attributes.label)+")")])])]:[s("section",{staticClass:"node-row"},[s("div",{staticClass:"node-container",class:{active:t.expanded},on:{click:t.toggleExpand}},[s("span",{staticClass:"node-name"},[t._v(t._s(t.node.name))]),s("div",{staticClass:"node-info"},[t.query.length>0?s("div",[s("span",[t._v("showing "+t._s(t.filteredFieldsSubtotal)+" of "+t._s(t.fieldsSubtotal)+" "+t._s(1==t.fieldsSubtotal?"field":"fields"))])]):t._e(),t.filteredFieldsSubtotal?s("div",[s("span",[t._v(t._s(t.totalSelected)+"/"+t._s(t.filteredFieldsSubtotal)+" selected")])]):t._e()])]),s("aside",[t.filteredFieldsSubtotal?s("section",{staticClass:"buttons"},[s("button",{staticClass:"btn btn-sm btn-select-all",class:{"btn-outline-secondary":t.totalSelected<t.filteredFieldsSubtotal,"btn-success":t.totalSelected===t.filteredFieldsSubtotal},on:{click:t.onSelectAll}},[t.totalSelected<t.filteredFieldsSubtotal?s("span",[t._v("select all")]):s("span",[t._v("deselect all")])])]):t._e()])]),t.expanded?s("section",{staticClass:"children"},t._l(t.data,(function(e){return s("FieldNodeCheckbox",{key:e.name,ref:"childnode",refInFor:!0,attrs:{parents:t.parents.concat(t.node.name),node:e}})})),1):t._e(),t.totalVisibleNodes>t.limit?s("ScrollSpy",{directives:[{name:"show",rawName:"v-show",value:t.expanded,expression:"expanded"}],staticClass:"my-2 text-center",on:{click:t.incrementLimit,intersect:t.onScollspyIntersect}}):t._e()]],2)},C=[],S=(s("c975"),s("b0c0"),s("498a"),s("96cf"),s("1da1")),$=s("710e"),F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("button",{staticClass:"btn btn-light btn-sm",on:{click:t.onClick}},[t._v("load more...")])])},D=[],E=(s("4160"),s("159b"),{name:"ScrollSpy",mounted:function(){this.registerIntersectionObserver()},methods:{registerIntersectionObserver:function(){var t=this,e=this.$el;if(e){var s={root:null,rootMargin:"0px",threshold:.1},i=function(e,s){e.forEach((function(e){t.$emit("intersect")}))},n=new IntersectionObserver(i,s);n.observe(e)}},onClick:function(t){this.$emit("click")}}}),O=E,N=Object(u["a"])(O,F,D,!1,null,"ef6aaaf4",null),R=N.exports,M=200,j={name:"FieldNodeCheckbox",components:{ScrollSpy:R},data:function(){return{expanded:!1,start:0,limit:M}},props:{node:{type:Object,default:function(){return{}}},parent_id:{type:String,default:""},parents:{type:Array,default:function(){return[]}}},computed:{data:function(){var t=0,e={};for(var s in this.node.data){if(t++>this.limit)break;e[s]=this.node.data[s]}return e},isChecked:function(){var t=this.$store.state.revision.fields;return t.indexOf(this.node.name)>=0},isChanged:function(){var t=this.$store.getters["revisions/selected"];if(!t)return!1;var e=t.fields;return this.isChecked&&e.indexOf(this.node.name)<0||!this.isChecked&&e.indexOf(this.node.name)>=0},classes:function(){return{collapsible:Object.keys(this.node.data).length>0,active:this.isActive,changed:this.isChanged}},query:function(){var t=this.$store.state.nodes.query,e=t.trim();return e},fields:function(){return Object($["c"])(this.node)},fieldsSubtotal:function(){return this.node.metadata.fieldsSubtotal},filteredFieldsSubtotal:function(){return Object($["d"])(this.node)},totalSelected:function(){var t=this.$store.state.revision.fields,e=Object(o["difference"])(this.fields,t);return this.filteredFieldsSubtotal-e.length},totalVisibleNodes:function(){var t=this.node.metadata.total,e=Object.keys(this.node.data).length,s=t-e;return t-s}},watch:{query:function(t){this.expanded=t.length>0}},methods:{onChange:function(t){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function s(){var i,n,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=t.currentTarget,n=t.currentTarget.checked,a=e.node.name,s.prev=2,s.next=5,e.$store.dispatch("revision/updateFields",{name:a,checked:n});case 5:s.sent,s.next=12;break;case 8:s.prev=8,s.t0=s["catch"](2),i.checked=!i.checked,e.$swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,icon:"error",title:s.t0,text:""});case 12:case"end":return s.stop()}}),s,null,[[2,8]])})))()},onSelectAll:function(t){t.preventDefault();var e=this.totalSelected<this.filteredFieldsSubtotal,s=this.$store.state.revision.fields,i=e?Object(o["union"])(s,this.fields):Object(o["difference"])(s,this.fields);this.$store.dispatch("revision/setFields",i)},toggleExpand:function(t){this.expanded=!this.expanded,this.expanded||(this.limit=M)},incrementLimit:function(){var t=this.limit+M;t>this.filteredFieldsSubtotal&&(t=this.filteredFieldsSubtotal),this.limit=t},onScollspyIntersect:function(){this.limit<this.fieldsSubtotal&&this.incrementLimit()}}},w=j,I=(s("894b"),Object(u["a"])(w,y,C,!1,null,"ee0377ea",null)),L=I.exports,q={name:"Fields",components:{FieldsFilter:k,FieldNodeCheckbox:L},computed:{sourceFields:function(){var t=this.$store.state.nodes.visibleNodes;if(t)return t.data},noResults:function(){var t=this.$store.state.nodes.query,e=0==Object.keys(this.sourceFields).length;return""!=t&&e}}},T=q,Y=(s("c493"),s("5636"),Object(u["a"])(T,p,m,!1,null,"462953ba",null)),A=Y.exports,P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"date-range"},[s("section",[s("label",{attrs:{for:"date-min"}},[t._v("from")]),s("div",{staticClass:"date-picker"},[s("DatePicker",{attrs:{max_date:t.max},model:{value:t.min,callback:function(e){t.min=e},expression:"min"}})],1),s("i",{staticClass:"fas fa-calendar-day"})]),s("section",[s("label",{attrs:{for:"date-min"}},[t._v("to")]),s("div",{staticClass:"date-picker"},[s("DatePicker",{attrs:{min_date:t.min},model:{value:t.max,callback:function(e){t.max=e},expression:"max"}})],1),s("i",{staticClass:"fas fa-calendar-day"})])])},V=[],Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("input",{ref:"date_picker",staticClass:"form-control",attrs:{type:"text",readonly:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.onDelete(e)},input:t.onInput}})},B=[],H=s("1157"),J=s.n(H),z=(s("567f"),s("3ff8"),s("4f9b"),s("ccf8"),s("c1df")),G=s.n(z),K="MM-DD-YYYY",U="YYYY-MM-DD",W={name:"DatePicker",props:{value:{type:[String,Date],default:""},min_date:{type:String},max_date:{type:String}},mounted:function(){var t=this,e=this.$refs.date_picker,s={changeMonth:!0,changeYear:!0,dateFormat:"mm-dd-yy",constrainInput:!1,onSelect:function(e,s){t.onInput()}};J()(e).datepicker(s),this.value&&this.set_value(),this.min_date&&this.set_min_date(),this.max_date&&this.set_max_date()},watch:{value:function(){this.set_value()},min_date:function(t){this.set_min_date(t)},max_date:function(t){this.set_max_date(t)}},methods:{onDelete:function(){this.$emit("input","")},set_value:function(){if(this.value){var t=G()(this.value).format(K);J()(this.$refs.date_picker).datepicker("setDate",t)}else J()(this.$refs.date_picker).datepicker("setDate",null)},set_min_date:function(t){var e=G()(this.min_date,U).toDate();J()(this.$refs.date_picker).datepicker("option","minDate",e)},set_max_date:function(t){var e=G()(this.max_date,U).toDate();J()(this.$refs.date_picker).datepicker("option","maxDate",e)},onInput:function(t){var e=this.getDate(),s=G()(e).format(U);this.$emit("input",s)},getDate:function(){var t=this.$refs.date_picker;return J()(t).datepicker("getDate")}}},X=W,Z=(s("45cd"),Object(u["a"])(X,Q,B,!1,null,"0563b4fc",null)),tt=Z.exports,et={name:"DateRange",components:{DatePicker:tt},data:function(){return{datepicker_config:{altInputClass:"date-picker",altInput:!0,altFormat:"m-d-Y",dateFormat:"Y-m-d"}}},mounted:function(){this.$el.querySelectorAll("input[data-key]")},computed:{min:{get:function(){var t=this.$store.state.revision.dateMin;return t},set:function(t){this.$store.dispatch("revision/setDateMin",t)}},max:{get:function(){var t=this.$store.state.revision.dateMax;return t},set:function(t){this.$store.dispatch("revision/setDateMax",t)}}},methods:{reset:function(t){var e=t.target,s=[46,8];if(s.indexOf(event.keyCode)>=0){var i=e.getAttribute("data-key");this[i]=""}}}},st=et,it=(s("214f"),Object(u["a"])(st,P,V,!1,null,"9545c478",null)),nt=it.exports,at=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"error-list"},[s("transition",{attrs:{name:"error"}},[t.errors.length?s("ul",{staticClass:"errors"},t._l(t.errors,(function(e,i){return s("li",{key:i},[s("i",{staticClass:"fas fa-exclamation-circle"}),t._v(" "+t._s(e))])})),0):t._e()])],1)},rt=[],ot={name:"ErrorList",props:{errors:{type:Array,default:function(){return[]}}}},ct=ot,lt=(s("575b"),Object(u["a"])(ct,at,rt,!1,null,"6da103dd",null)),dt=lt.exports,ut=Object.freeze({DATE:"date",FIELDS:"fields",MRNS:"mrns"}),ft={name:"RevisionManagerView",data:function(){return{settings_groups:ut}},components:{MRNListEditor:h,Fields:A,DateRange:nt,ErrorList:dt},props:{hidden_groups:{type:Array,default:function(){return[]}}},computed:{isDirty:function(){return this.$store.getters["revision/isDirty"]},errors:function(){return this.$store.state.validator.errors}}},ht=ft,pt=(s("8575"),Object(u["a"])(ht,i,n,!1,null,"2b67320d",null));e["a"]=pt.exports},f612:function(t,e,s){},fe32:function(t,e,s){}}]);
//# sourceMappingURL=datamart_vue.umd.min.1.js.map